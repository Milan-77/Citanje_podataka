<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÄŒitanje podataka o studentima</title>
    <style>
        #text-area {
            width: 49%;
            height: 90vh;
            font-size: 20px;
            text-align: center;
            font-weight: 700;
            color: black;
            border: 2px solid black;

        }

        #get-data {
            display: block;
            width: 50%;
            height: 50px;
            color: black;
            font-size: 25px;
            margin-bottom: 5px;
            border: 2px solid black;
        }
    </style>
</head>

<body>

    <button id="get-data">Get Students Data</button>
    <textarea id="text-area" cols="100" rows="100"></textarea>

    <script>
        let button = document.getElementById("get-data");

        let textArea = document.getElementById("text-area");


        function Student(name, addres, phone, course) {

            this.name = name;
            this.addres = addres;
            this.phone = phone;
            this.course = course;

            this.getName = function () {
                return "Student :" + " " + this.name;

            }

            this.getInfo = function () {
                return "Name :" + " " + this.name + "\n" +
                    "Addres :" + " " + this.addres + "\n" +
                    "Phone :" + " " + this.phone + "\n" +
                    "Course :" + " " + this.course
            }
        };

        button.addEventListener("click", function () {
            textArea.innerHTML = "";


            fetch('https://v-dresevic.github.io/Advanced-JavaScript-Programming/data/students.txt').then(function (respons) {


                if (respons.status !== 200) {
                    throw Error("error while reading file.");

                }

                return respons.text();
            }).then(function (text) {

                var data = text.split('\r\n');
                let r = 0;
                var student = [];
                let t = 0;
                let s = 5;
                for (let i = 0; i < s; i++) {

                    if (student.length[i] === 4) {
                        i++;
                        s++;
                    } else {
                        student.push(new Student(
                            this.name = data[0 + t],
                            this.addres = data[1 + t],
                            this.phone = data[2 + t],
                            this.course = data[3 + t]));

                        t = t + 4;
                        r++;
                        
                        student[i] = " Student: " + [r] + " "+ '\n' + '\n'
                            + student[i].getName() + '\n' + '\n' + student[i].getInfo()
                    }

                    textArea.innerHTML += '\n' + student[i] + '\n'

                }

            })
                .catch(function (err) {
                    textArea.innerHTML = 'Fetch problem; ' + err.mesage;
                })
        })

        </script>
    </body>
</html>